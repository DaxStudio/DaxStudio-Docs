"use strict";(globalThis.webpackChunkdaxstudio_docusaurus=globalThis.webpackChunkdaxstudio_docusaurus||[]).push([[1191],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(96540);const o={},i=s.createContext(o);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},77861:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"features/command-line/commands/accesstoken-command","title":"ACCESSTOKEN command","description":"This command will output an access token for the specified connection settings. This command will only work against data sources that support Entra authentication like Power BI / Fabric or AzureAS.","source":"@site/docs/features/command-line/commands/accesstoken-command.md","sourceDirName":"features/command-line/commands","slug":"/features/command-line/commands/accesstoken-command","permalink":"/docs/features/command-line/commands/accesstoken-command","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"ACCESSTOKEN command"},"sidebar":"tutorialSidebar","previous":{"title":"Commands","permalink":"/docs/features/command-line/commands"},"next":{"title":"CSV command","permalink":"/docs/features/command-line/commands/csv-command"}}');var o=t(74848),i=t(28453);const a={title:"ACCESSTOKEN command"},r=void 0,c={},d=[{value:"Syntax",id:"syntax",level:2},{value:"Options",id:"options",level:2},{value:"Example",id:"example",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"This command will output an access token for the specified connection settings. This command will only work against data sources that support Entra authentication like Power BI / Fabric or AzureAS."}),"\n",(0,o.jsx)(n.p,{children:"Typically this command will not be used on its own. Instead it is designed to be used in scripts with loops. If you don't have access to a Service Principal and you need to login to Power BI or Azure AS interactively you can use this command to log in once. This can be achieved by passing in the accesstoken as the password."}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["When passing the access token using the ",(0,o.jsx)(n.code,{children:"-p|-password"})," parameter it is important not to also pass the username (the token has already been generated)"]})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"The access token is like a one time password, it is usually only valid for 60-90 minutes. You can also see these tokens in the browser dev tools when accessing websites using Entra authentication so having access to one locally is not an issue, but they should not be shared with any other person and you should avoid using them on share computers."})}),"\n",(0,o.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"DSCMD ACCESSTOKEN [OPTIONS]\n"})}),"\n",(0,o.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-h, --help"}),(0,o.jsx)(n.td,{children:"displays the help for the ACCESSTOKEN command"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-s, --server <SERVER>"}),(0,o.jsx)(n.td,{children:"the name of the server to connect to"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-d, --database <DATABASE>"}),(0,o.jsx)(n.td,{children:"The name of the tabular database to export from"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-u, --userid <USERID>"}),(0,o.jsxs)(n.td,{children:["The username to use for authentication (see ",(0,o.jsx)(n.a,{href:"../../authentication",children:"Authentication"})," for more details)"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-p, --password <PASSWORD>"}),(0,o.jsxs)(n.td,{children:["The password to use for authentication (see ",(0,o.jsx)(n.a,{href:"../../authentication",children:"Authentication"})," for more details)"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-c, --connectionstring <CONNECTIONSTRING>"}),(0,o.jsx)(n.td,{children:"The connection string for the data source"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-f, --file <FILE>"}),(0,o.jsx)(n.td,{children:"A file containing a DAX query to be executed. Could be a text file or .dax or .daxx"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-q, --query <QUERY>"}),(0,o.jsx)(n.td,{children:"A string with the DAX query to be executed"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"-t, --filetype <VALUE>"}),(0,o.jsxs)(n.td,{children:["Can be one of the following values ( UTF8CSV, UNICODECSV, JSON, TAB ) if omitted the file extension is used ",(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:".csv - UFT-8 csv file is generated"}),(0,o.jsx)("li",{children:".txt - tab delimited file is generated"}),(0,o.jsx)("li",{children:".json - a json file is generated "})]})]})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,o.jsxs)(n.p,{children:["The following example uses the ",(0,o.jsx)(n.code,{children:"ACCESSTOKEN"})," command to prompt once to login to an Entra account. Then it uses that token multiple times in a loop to generate a different csv file for each country."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'$query = @"\nEVALUATE { COUNTROWS(\nFILTER( customer\n\t, customer[country] = @country\n\t)\n)}\n"@\n\n$cmd = "dscmd.exe"\n$server = "powerbi://api.powerbi.com/v1.0/myorg/Example"\n$database = "contoso custom"\n\n## This line will prompt for an Entra account\n$token = &$cmd ACCESSTOKEN -s $server -d $database  \n\n## Then we generate separate csv files passing in the accesstoken as the password\nforeach ( $country in @(\'AU\', \'CA\', \'DE\', \'FR\')) {\n\t\t\n\tWrite-Host "Running query for country: $country"\n\t&$cmd csv c:\\temp\\myquery-$country.csv -s $server -d $database -p $token  -m country=$country -q $query\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);